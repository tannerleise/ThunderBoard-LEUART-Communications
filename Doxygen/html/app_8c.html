<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LEUART Lab: src/Source Files/app.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LEUART Lab
   </div>
   <div id="projectbrief">Uses the leuart to communicate with the ble blutooth module.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_c9e40434d11e5548a56e3b283ebc6198.html">Source Files</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">app.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Initializes all peripherals and initializes LETIMER0 for PWM operation.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;app.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a255008f526c267a13ba0ee3c357d0994"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="app_8c.html#a255008f526c267a13ba0ee3c357d0994">app_letimer_pwm_open</a> (float period, float act_period, uint32_t out0_route, uint32_t out1_route)</td></tr>
<tr class="memdesc:a255008f526c267a13ba0ee3c357d0994"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes LETIMER0 for PWM operation.  <a href="app_8c.html#a255008f526c267a13ba0ee3c357d0994">More...</a><br /></td></tr>
<tr class="separator:a255008f526c267a13ba0ee3c357d0994"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8cdb39575ad0f98ace1c6fbd9c54b83"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="app_8c.html#ab8cdb39575ad0f98ace1c6fbd9c54b83">app_peripheral_setup</a> (void)</td></tr>
<tr class="memdesc:ab8cdb39575ad0f98ace1c6fbd9c54b83"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes all peripherals.  <a href="app_8c.html#ab8cdb39575ad0f98ace1c6fbd9c54b83">More...</a><br /></td></tr>
<tr class="separator:ab8cdb39575ad0f98ace1c6fbd9c54b83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a581a2487f5e3832dee157b061c99aba6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="app_8c.html#a581a2487f5e3832dee157b061c99aba6">led_color_open</a> (void)</td></tr>
<tr class="memdesc:a581a2487f5e3832dee157b061c99aba6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the static variable for LED color and initializes the the LEDs.  <a href="app_8c.html#a581a2487f5e3832dee157b061c99aba6">More...</a><br /></td></tr>
<tr class="separator:a581a2487f5e3832dee157b061c99aba6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52609454c2bcb62915a021fd3bf37695"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="app_8c.html#a52609454c2bcb62915a021fd3bf37695">scheduled_letimer0_comp0_cb</a> (void)</td></tr>
<tr class="memdesc:a52609454c2bcb62915a021fd3bf37695"><td class="mdescLeft">&#160;</td><td class="mdescRight">The Callback function for the comp0 interrupt. Does nothing in this program.  <a href="app_8c.html#a52609454c2bcb62915a021fd3bf37695">More...</a><br /></td></tr>
<tr class="separator:a52609454c2bcb62915a021fd3bf37695"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affb614dc52fb9577fbd67cf9150f6ed5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="app_8c.html#affb614dc52fb9577fbd67cf9150f6ed5">scheduled_letimer0_comp1_cb</a> (void)</td></tr>
<tr class="memdesc:affb614dc52fb9577fbd67cf9150f6ed5"><td class="mdescLeft">&#160;</td><td class="mdescRight">The callback function for the comp1 interrupt that causes a sense of the Si1133.  <a href="app_8c.html#affb614dc52fb9577fbd67cf9150f6ed5">More...</a><br /></td></tr>
<tr class="separator:affb614dc52fb9577fbd67cf9150f6ed5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a9d1e1d44bd0e250b4487029f89b091"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="app_8c.html#a1a9d1e1d44bd0e250b4487029f89b091">scheduled_letimer0_uf_cb</a> (void)</td></tr>
<tr class="memdesc:a1a9d1e1d44bd0e250b4487029f89b091"><td class="mdescLeft">&#160;</td><td class="mdescRight">This requests the result from the SI1133.  <a href="app_8c.html#a1a9d1e1d44bd0e250b4487029f89b091">More...</a><br /></td></tr>
<tr class="separator:a1a9d1e1d44bd0e250b4487029f89b091"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb5099f23ef76b3256a8f44bdbb0caef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="app_8c.html#aeb5099f23ef76b3256a8f44bdbb0caef">scheduled_si1133_read_cb</a> (void)</td></tr>
<tr class="memdesc:aeb5099f23ef76b3256a8f44bdbb0caef"><td class="mdescLeft">&#160;</td><td class="mdescRight">This compares the data received by the S1133 turns blue if it is dark it turns off when it is light. Also transmits "its dark" and the reading when the data is less than our expected value. If it is greater than or equal to our expected value it transmits the data and days "its light outside".  <a href="app_8c.html#aeb5099f23ef76b3256a8f44bdbb0caef">More...</a><br /></td></tr>
<tr class="separator:aeb5099f23ef76b3256a8f44bdbb0caef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96ed4249e24143f1049e9293f6b75f4a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="app_8c.html#a96ed4249e24143f1049e9293f6b75f4a">scheduled_boot_up_cb</a> (void)</td></tr>
<tr class="memdesc:a96ed4249e24143f1049e9293f6b75f4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is a call back that is called upon start up. If needed it runs the ble test. After, it transmits hello world then starts the LETIMER.  <a href="app_8c.html#a96ed4249e24143f1049e9293f6b75f4a">More...</a><br /></td></tr>
<tr class="separator:a96ed4249e24143f1049e9293f6b75f4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd95b9dd233117b831c2446a48ded0df"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="app_8c.html#acd95b9dd233117b831c2446a48ded0df">scheduled_ble_tx_done_cb</a> (void)</td></tr>
<tr class="memdesc:acd95b9dd233117b831c2446a48ded0df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Not used in this applications.  <a href="app_8c.html#acd95b9dd233117b831c2446a48ded0df">More...</a><br /></td></tr>
<tr class="separator:acd95b9dd233117b831c2446a48ded0df"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aae8a40a17c0be29c1f06ca6b4f9e2235"><td class="memItemLeft" align="right" valign="top"><a id="aae8a40a17c0be29c1f06ca6b4f9e2235" name="aae8a40a17c0be29c1f06ca6b4f9e2235"></a>
static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>x</b> = 3</td></tr>
<tr class="separator:aae8a40a17c0be29c1f06ca6b4f9e2235"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c02f93c9698e4486878867c4f265c48"><td class="memItemLeft" align="right" valign="top"><a id="a9c02f93c9698e4486878867c4f265c48" name="a9c02f93c9698e4486878867c4f265c48"></a>
static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>y</b> = 0</td></tr>
<tr class="separator:a9c02f93c9698e4486878867c4f265c48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9955ed39d24c1be79c21f183a567e48c"><td class="memItemLeft" align="right" valign="top"><a id="a9955ed39d24c1be79c21f183a567e48c" name="a9955ed39d24c1be79c21f183a567e48c"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>LED_COLOR</b></td></tr>
<tr class="separator:a9955ed39d24c1be79c21f183a567e48c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Initializes all peripherals and initializes LETIMER0 for PWM operation. </p>
<p ><a class="el" href="app_8c.html" title="Initializes all peripherals and initializes LETIMER0 for PWM operation.">app.c</a> </p><dl class="section author"><dt>Author</dt><dd>Tanner Leise </dd></dl>
<dl class="section date"><dt>Date</dt><dd>9/8/21 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a255008f526c267a13ba0ee3c357d0994" name="a255008f526c267a13ba0ee3c357d0994"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a255008f526c267a13ba0ee3c357d0994">&#9670;&nbsp;</a></span>app_letimer_pwm_open()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void app_letimer_pwm_open </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>period</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>act_period</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>out0_route</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>out1_route</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initializes LETIMER0 for PWM operation. </p>
<p >Accesses members of the <a class="el" href="struct_a_p_p___l_e_t_i_m_e_r___p_w_m___type_def.html">APP_LETIMER_PWM_TypeDef</a> of the local variable app_letimer_pwm_struct and sets it for the specific needs of the pwm signal. That structure is then passed into the pwm open function written in <a class="el" href="letimer_8c.html" title="Driver to open an set an LETIMER peripheral in PWM mode.">letimer.c</a>. Refer to more detail there.</p>
<dl class="section note"><dt>Note</dt><dd>This function should be called in the application file. It is called to set up and enable specific LETIMER for the user.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">period</td><td>The overall period of the PWM waveform.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">act_period</td><td>This is the on period of the active waveform </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab8cdb39575ad0f98ace1c6fbd9c54b83" name="ab8cdb39575ad0f98ace1c6fbd9c54b83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8cdb39575ad0f98ace1c6fbd9c54b83">&#9670;&nbsp;</a></span>app_peripheral_setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void app_peripheral_setup </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes all peripherals. </p>
<p >Calls all of the other functions in their respective drivers. Specifically it sets up the cmu and gpio. It also sets up LETIMER0 for pwm operation, then starts our timer.</p>
<dl class="section note"><dt>Note</dt><dd>This function is to be called in main before we enter our loop of operation. This will be the final step of configuration and setup before actual operation begins. </dd></dl>

</div>
</div>
<a id="a581a2487f5e3832dee157b061c99aba6" name="a581a2487f5e3832dee157b061c99aba6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a581a2487f5e3832dee157b061c99aba6">&#9670;&nbsp;</a></span>led_color_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void led_color_open </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the static variable for LED color and initializes the the LEDs. </p>
<p >Sets LED_COLOR = 0 and calls <a class="el" href="_l_e_ds__thunderboard_8c.html#a5aa509ed3a4cfe6f812692e248618a51" title="Initializes the pins our LEDs.">rgb_init()</a> which sets up the out pins for the LEDs</p>
<dl class="section note"><dt>Note</dt><dd>This should be called in peripheral setup </dd></dl>

</div>
</div>
<a id="acd95b9dd233117b831c2446a48ded0df" name="acd95b9dd233117b831c2446a48ded0df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd95b9dd233117b831c2446a48ded0df">&#9670;&nbsp;</a></span>scheduled_ble_tx_done_cb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void scheduled_ble_tx_done_cb </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Not used in this applications. </p>
<dl class="section note"><dt>Note</dt><dd></dd></dl>

</div>
</div>
<a id="a96ed4249e24143f1049e9293f6b75f4a" name="a96ed4249e24143f1049e9293f6b75f4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96ed4249e24143f1049e9293f6b75f4a">&#9670;&nbsp;</a></span>scheduled_boot_up_cb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void scheduled_boot_up_cb </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is a call back that is called upon start up. If needed it runs the ble test. After, it transmits hello world then starts the LETIMER. </p>
<p >If requested, sets the board name and then runs the ble test. Then, it transmits the phrase "Hello World". Finally, it starts the LETIMER.</p>
<dl class="section note"><dt>Note</dt><dd>Called in app_peripheral_setup </dd></dl>

</div>
</div>
<a id="a52609454c2bcb62915a021fd3bf37695" name="a52609454c2bcb62915a021fd3bf37695"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52609454c2bcb62915a021fd3bf37695">&#9670;&nbsp;</a></span>scheduled_letimer0_comp0_cb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void scheduled_letimer0_comp0_cb </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The Callback function for the comp0 interrupt. Does nothing in this program. </p>
<p >Does nothing in this program</p>
<dl class="section note"><dt>Note</dt><dd>N/A </dd></dl>

</div>
</div>
<a id="affb614dc52fb9577fbd67cf9150f6ed5" name="affb614dc52fb9577fbd67cf9150f6ed5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#affb614dc52fb9577fbd67cf9150f6ed5">&#9670;&nbsp;</a></span>scheduled_letimer0_comp1_cb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void scheduled_letimer0_comp1_cb </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The callback function for the comp1 interrupt that causes a sense of the Si1133. </p>
<p >This calls the force_sense function</p>
<dl class="section note"><dt>Note</dt><dd>Called when the comp1 interrupt is triggered </dd></dl>

</div>
</div>
<a id="a1a9d1e1d44bd0e250b4487029f89b091" name="a1a9d1e1d44bd0e250b4487029f89b091"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a9d1e1d44bd0e250b4487029f89b091">&#9670;&nbsp;</a></span>scheduled_letimer0_uf_cb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void scheduled_letimer0_uf_cb </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This requests the result from the SI1133. </p>
<p >calls Si1133_request_result then does the math with x, y, and z</p>
<dl class="section note"><dt>Note</dt><dd>Called when the uf interrupt is triggered </dd></dl>

</div>
</div>
<a id="aeb5099f23ef76b3256a8f44bdbb0caef" name="aeb5099f23ef76b3256a8f44bdbb0caef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb5099f23ef76b3256a8f44bdbb0caef">&#9670;&nbsp;</a></span>scheduled_si1133_read_cb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void scheduled_si1133_read_cb </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This compares the data received by the S1133 turns blue if it is dark it turns off when it is light. Also transmits "its dark" and the reading when the data is less than our expected value. If it is greater than or equal to our expected value it transmits the data and days "its light outside". </p>
<p >Compares the data read from the si1133 to the the value of 20 which was provided as the number needed in the lab doc. If is is less than 20 then we turn the blue led on. If the read data is greater than 20, then we turn the led off. Also transmits "its dark" and the reading when the data is less than our expected value. If it is greater than or equal to our expected value it transmits the data and days "its light outside"</p>
<dl class="section note"><dt>Note</dt><dd>This callback is triggered after the comp1 interrupt has been triggered </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
